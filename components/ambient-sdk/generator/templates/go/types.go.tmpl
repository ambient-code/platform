// Code generated by ambient-sdk-generator from openapi.yaml â€” DO NOT EDIT.
// Source: {{.Header.SpecPath}}
// Spec SHA256: {{.Header.SpecHash}}
// Generated: {{.Header.Timestamp}}

package types

import (
	"errors"
	"fmt"
{{- if hasTimeImport .Resource.Fields}}
	"time"
{{- end}}
)

type {{.Resource.Name}} struct {
	ObjectReference
{{range .Resource.Fields}}
	{{.GoName}} {{.GoType}} {{.JSONTag}}
{{- end}}
}

type {{.Resource.Name}}List struct {
	ListMeta
	Items []{{.Resource.Name}} `json:"items"`
}

func (l *{{.Resource.Name}}List) GetItems() []{{.Resource.Name}} { return l.Items }
func (l *{{.Resource.Name}}List) GetTotal() int                  { return l.Total }
func (l *{{.Resource.Name}}List) GetPage() int                   { return l.Page }
func (l *{{.Resource.Name}}List) GetSize() int                   { return l.Size }

type {{.Resource.Name}}Builder struct {
	resource {{.Resource.Name}}
	errors   []error
}

func New{{.Resource.Name}}Builder() *{{.Resource.Name}}Builder {
	return &{{.Resource.Name}}Builder{}
}

{{range .Resource.Fields}}{{if isWritable .}}
func (b *{{$.Resource.Name}}Builder) {{.GoName}}(v {{.GoType}}) *{{$.Resource.Name}}Builder {
	b.resource.{{.GoName}} = v
	return b
}
{{end}}{{end}}

func (b *{{.Resource.Name}}Builder) Build() (*{{.Resource.Name}}, error) {
{{- range .Resource.Fields}}
	{{- if .Required}}
	{{- if eq .GoType "string"}}
	if b.resource.{{.GoName}} == "" {
		b.errors = append(b.errors, fmt.Errorf("{{.Name}} is required"))
	}
	{{- else if eq .GoType "int32"}}
	{{- else if eq .GoType "int"}}
	{{- end}}
	{{- end}}
{{- end}}
	if len(b.errors) > 0 {
		return nil, fmt.Errorf("validation failed: %w", errors.Join(b.errors...))
	}
	return &b.resource, nil
}

type {{.Resource.Name}}PatchBuilder struct {
	patch map[string]any
}

func New{{.Resource.Name}}PatchBuilder() *{{.Resource.Name}}PatchBuilder {
	return &{{.Resource.Name}}PatchBuilder{patch: make(map[string]any)}
}

{{range .Resource.PatchFields}}
func (b *{{$.Resource.Name}}PatchBuilder) {{.GoName}}(v {{.GoType}}) *{{$.Resource.Name}}PatchBuilder {
	b.patch["{{.Name}}"] = v
	return b
}
{{end}}

func (b *{{.Resource.Name}}PatchBuilder) Build() map[string]any {
	return b.patch
}
{{if .Resource.HasStatusPatch}}
type {{.Resource.Name}}StatusPatchBuilder struct {
	patch map[string]any
}

func New{{.Resource.Name}}StatusPatchBuilder() *{{.Resource.Name}}StatusPatchBuilder {
	return &{{.Resource.Name}}StatusPatchBuilder{patch: make(map[string]any)}
}

{{range .Resource.StatusPatchFields}}
func (b *{{$.Resource.Name}}StatusPatchBuilder) {{.GoName}}(v {{.GoType}}) *{{$.Resource.Name}}StatusPatchBuilder {
	b.patch["{{.Name}}"] = v
	return b
}
{{end}}

func (b *{{.Resource.Name}}StatusPatchBuilder) Build() map[string]any {
	return b.patch
}
{{end}}
