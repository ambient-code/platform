# Code generated by ambient-sdk-generator from openapi.yaml â€” DO NOT EDIT.
# Source: ../../ambient-api-server/openapi/openapi.yaml
# Spec SHA256: f0ec84178602f3437cc365a1e354b5286dbd72ff5c138db499664f62b927bb61
# Generated: 2026-02-28T15:30:52Z

from __future__ import annotations

from typing import Any, Iterator, Optional, TYPE_CHECKING

from ._base import ListOptions
from .project import Project, ProjectList

if TYPE_CHECKING:
    from .client import AmbientClient


class ProjectAPI:
    def __init__(self, client: AmbientClient) -> None:
        self._client = client

    def create(self, data: dict) -> Project:
        resp = self._client._request("POST", "/projects", json=data)
        return Project.from_dict(resp)

    def get(self, resource_id: str) -> Project:
        resp = self._client._request("GET", f"/projects/{resource_id}")
        return Project.from_dict(resp)

    def list(self, opts: Optional[ListOptions] = None) -> ProjectList:
        params = opts.to_params() if opts else None
        resp = self._client._request("GET", "/projects", params=params)
        return ProjectList.from_dict(resp)
    def update(self, resource_id: str, patch: Any) -> Project:
        data = patch.to_dict() if hasattr(patch, "to_dict") else patch
        resp = self._client._request("PATCH", f"/projects/{resource_id}", json=data)
        return Project.from_dict(resp)

    def delete(self, resource_id: str) -> None:
        self._client._request("DELETE", f"/projects/{resource_id}", expect_json=False)

    def list_all(self, size: int = 100, **kwargs: Any) -> Iterator[Project]:
        page = 1
        while True:
            result = self.list(ListOptions().page(page).size(size))
            yield from result.items
            if page * size >= result.total:
                break
            page += 1
