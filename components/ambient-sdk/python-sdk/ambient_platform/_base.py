# Code generated by ambient-sdk-generator from openapi.yaml — DO NOT EDIT.
# Source: /home/mturansk/projects/src/github.com/ambient/platform/components/ambient-api-server/openapi/openapi.yaml
# Spec SHA256: 8ab1aa38f80654f4de02c1a997e1ac8d7d502606cbe5ff819abb6fdc2c7c504d
# Generated: 2026-02-15T12:36:04Z

from __future__ import annotations

from dataclasses import dataclass
from datetime import datetime
from typing import Any, Optional


def _parse_datetime(value: Any) -> Optional[datetime]:
    if value is None:
        return None
    if isinstance(value, datetime):
        return value
    if isinstance(value, str):
        try:
            return datetime.fromisoformat(value.replace("Z", "+00:00"))
        except (ValueError, TypeError):
            return None
    return None


@dataclass(frozen=True)
class ObjectReference:
    id: str = ""
    kind: str = ""
    href: str = ""
    created_at: Optional[datetime] = None
    updated_at: Optional[datetime] = None

    @classmethod
    def from_dict(cls, data: dict) -> ObjectReference:
        return cls(
            id=data.get("id", ""),
            kind=data.get("kind", ""),
            href=data.get("href", ""),
            created_at=_parse_datetime(data.get("created_at")),
            updated_at=_parse_datetime(data.get("updated_at")),
        )


@dataclass(frozen=True)
class ListMeta:
    kind: str = ""
    page: int = 0
    size: int = 0
    total: int = 0


@dataclass(frozen=True)
class APIError(Exception):
    status_code: int = 0
    code: str = ""
    reason: str = ""
    operation_id: str = ""
    id: str = ""
    kind: str = ""
    href: str = ""

    def __str__(self) -> str:
        return f"ambient API error {self.status_code}: {self.code} — {self.reason}"

    @classmethod
    def from_dict(cls, data: dict, status_code: int = 0) -> APIError:
        return cls(
            status_code=status_code,
            code=data.get("code", ""),
            reason=data.get("reason", ""),
            operation_id=data.get("operation_id", ""),
            id=data.get("id", ""),
            kind=data.get("kind", ""),
            href=data.get("href", ""),
        )


class ListOptions:
    def __init__(self) -> None:
        self._params: dict[str, Any] = {"page": 1, "size": 100}

    def page(self, value: int) -> ListOptions:
        self._params["page"] = value
        return self

    def size(self, value: int) -> ListOptions:
        if value > 65500:
            value = 65500
        self._params["size"] = value
        return self

    def search(self, value: str) -> ListOptions:
        self._params["search"] = value
        return self

    def order_by(self, value: str) -> ListOptions:
        self._params["orderBy"] = value
        return self

    def fields(self, value: str) -> ListOptions:
        self._params["fields"] = value
        return self

    def to_params(self) -> dict[str, Any]:
        return {k: v for k, v in self._params.items() if v}
