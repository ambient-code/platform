# Unleash Credentials Secret
# Copy this file to unleash-credentials-secret.yaml and customize values
#
# To apply: kubectl apply -f unleash-credentials-secret.yaml -n ambient-code
#
# IMPORTANT: Change all credentials for production deployments!
#
# This secret is used by:
# 1. unleash-deployment.yaml - Unleash server configuration
# 2. backend-deployment.yaml - Backend API for feature flag evaluation
# 3. frontend-deployment.yaml - Frontend for flag proxy
#
# NOTE: PostgreSQL credentials are in postgresql-credentials-secret.yaml
#
apiVersion: v1
kind: Secret
metadata:
  name: unleash-credentials
  labels:
    app: unleash
    app.kubernetes.io/name: unleash
type: Opaque
stringData:
  # ============================================================
  # Database connection (uses shared PostgreSQL instance)
  # Update password to match postgresql-credentials-secret.yaml
  # ============================================================
  database-url: "postgres://postgres:CHANGE_ME_IN_PRODUCTION@postgresql:5432/unleash"
  # Enable SSL for production database connections
  database-ssl: "true"

  # ============================================================
  # Unleash API URLs (used by backend-deployment.yaml)
  # ============================================================
  # Client API URL - for flag evaluation
  unleash-url: "http://unleash.ambient-code.svc.cluster.local:4242/api"

  # Admin API URL - for listing flags and admin operations
  unleash-admin-url: "http://unleash.ambient-code.svc.cluster.local:4242"

  # ============================================================
  # Unleash API Tokens
  # Format: <project>:<environment>.<token>
  # Use *:* for wildcard (all projects/environments)
  # ============================================================

  # Admin API token - full admin access
  # Used by: UNLEASH_ADMIN_TOKEN in backend
  admin-api-token: "*:*.unleash-admin-token"

  # Client API token - read-only for flag evaluation
  # Used by: UNLEASH_CLIENT_KEY in backend
  client-api-token: "default:development.unleash-client-token"

  # Frontend API token - for direct browser SDK usage (optional)
  frontend-api-token: "default:development.unleash-frontend-token"

  # ============================================================
  # Unleash Admin UI Password
  # Overrides the default admin password on first startup
  # ============================================================
  default-admin-password: "CHANGE_ME_IN_PRODUCTION"

  # ============================================================
  # Unleash Project/Environment (used by backend-deployment.yaml)
  # ============================================================
  unleash-project: "default"
  unleash-environment: "development"
